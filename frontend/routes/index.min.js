import { Router } from "express"; import axios from "axios"; const router = Router(); router.get("/", (async (req, res, next) => { const { category: category } = req.query; const { data: data } = await axios.get(process.env.BACKEND_URL + "/menu").catch((err => { console.log(err); return { data: { data: [] } } })); let items = data.data; const categories = Array.from(new Set(items.flatMap((item => item.category)))); if (category) { items = items.filter((item => item.category.includes(category))) } res.render("index", { title: "Menu", items: items, categories: categories, category: category }) })); export default router;